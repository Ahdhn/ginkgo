\hypertarget{install_ginkgo_autotoc_md0}{}\doxysubsection{Building}\label{install_ginkgo_autotoc_md0}
Use the standard cmake build procedure\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{mkdir build; cd build}
\DoxyCodeLine{cmake -\/G "Unix Makefiles" [OPTIONS] .. \&\& make}
\end{DoxyCode}
 Use {\ttfamily cmake -\/-\/build .} in some systems like Min\+GW or Microsoft Visual Studio which do not use {\ttfamily make}.

For Microsoft Visual Studio, use {\ttfamily cmake -\/-\/build . -\/-\/config $<$build\+\_\+type$>$} to decide the build type. The possible options are {\ttfamily Debug}, {\ttfamily Release}, {\ttfamily Rel\+With\+Deb\+Info} and {\ttfamily Min\+Size\+Rel}.

Replace {\ttfamily \mbox{[}O\+P\+T\+I\+O\+NS\mbox{]}} with desired cmake options for your build. Ginkgo adds the following additional switches to control what is being built\+:


\begin{DoxyItemize}
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+D\+E\+V\+E\+L\+\_\+\+T\+O\+O\+LS=\{ON, O\+FF\}} sets up the build system for development (requires clang-\/format, will also download git-\/cmake-\/format), default is {\ttfamily O\+FF}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+B\+U\+I\+L\+D\+\_\+\+T\+E\+S\+TS=\{ON, O\+FF\}} builds Ginkgo\textquotesingle{}s tests (will download googletest), default is {\ttfamily ON}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+B\+U\+I\+L\+D\+\_\+\+B\+E\+N\+C\+H\+M\+A\+R\+KS=\{ON, O\+FF\}} builds Ginkgo\textquotesingle{}s benchmarks (will download gflags and rapidjson), default is {\ttfamily ON}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+B\+U\+I\+L\+D\+\_\+\+E\+X\+A\+M\+P\+L\+ES=\{ON, O\+FF\}} builds Ginkgo\textquotesingle{}s examples, default is {\ttfamily ON}
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+B\+U\+I\+L\+D\+\_\+\+E\+X\+T\+L\+I\+B\+\_\+\+E\+X\+A\+M\+P\+LE=\{ON, O\+FF\}} builds the interfacing example with deal.\+II, default is {\ttfamily O\+FF}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+B\+U\+I\+L\+D\+\_\+\+R\+E\+F\+E\+R\+E\+N\+CE=\{ON, O\+FF\}} build reference implementations of the kernels, useful for testing, default is {\ttfamily ON}
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+B\+U\+I\+L\+D\+\_\+\+O\+MP=\{ON, O\+FF\}} builds optimized Open\+MP versions of the kernels, default is {\ttfamily ON} if the selected C++ compiler supports Open\+MP, {\ttfamily O\+FF} otherwise.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+B\+U\+I\+L\+D\+\_\+\+C\+U\+DA=\{ON, O\+FF\}} builds optimized cuda versions of the kernels (requires C\+U\+DA), default is {\ttfamily ON} if a C\+U\+DA compiler could be detected, {\ttfamily O\+FF} otherwise.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+B\+U\+I\+L\+D\+\_\+\+H\+IP=\{ON, O\+FF\}} builds optimized H\+IP versions of the kernels (requires H\+IP), default is {\ttfamily ON} if an installation of H\+IP could be detected, {\ttfamily O\+FF} otherwise.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+H\+I\+P\+\_\+\+A\+M\+D\+G\+PU=\char`\"{}gpuarch1;gpuarch2\char`\"{}} the amdgpu\+\_\+target(s) variable passed to hipcc for the {\ttfamily hcc} H\+IP backend. The default is none (auto).
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+B\+U\+I\+L\+D\+\_\+\+D\+OC=\{ON, O\+FF\}} creates an H\+T\+ML version of Ginkgo\textquotesingle{}s documentation from inline comments in the code. The default is {\ttfamily O\+FF}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+D\+O\+C\+\_\+\+G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+E\+X\+A\+M\+P\+L\+ES=\{ON, O\+FF\}} generates the documentation of examples in Ginkgo. The default is {\ttfamily ON}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+D\+O\+C\+\_\+\+G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+P\+DF=\{ON, O\+FF\}} generates a P\+DF version of Ginkgo\textquotesingle{}s documentation from inline comments in the code. The default is {\ttfamily O\+FF}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+D\+O\+C\+\_\+\+G\+E\+N\+E\+R\+A\+T\+E\+\_\+\+D\+EV=\{ON, O\+FF\}} generates the developer version of Ginkgo\textquotesingle{}s documentation. The default is {\ttfamily O\+FF}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+E\+X\+P\+O\+R\+T\+\_\+\+B\+U\+I\+L\+D\+\_\+\+D\+IR=\{ON, O\+FF\}} adds the Ginkgo build directory to the C\+Make package registry. The default is {\ttfamily O\+FF}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+W\+I\+T\+H\+\_\+\+C\+L\+A\+N\+G\+\_\+\+T\+I\+DY=\{ON, O\+FF\}} makes Ginkgo call {\ttfamily clang-\/tidy} to find programming issues. The path can be manually controlled with the C\+Make variable {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+C\+L\+A\+N\+G\+\_\+\+T\+I\+D\+Y\+\_\+\+P\+A\+TH=$<$path$>$}. The default is {\ttfamily O\+FF}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+W\+I\+T\+H\+\_\+\+I\+W\+YU=\{ON, O\+FF\}} makes Ginkgo call {\ttfamily iwyu} to find include issues. The path can be manually controlled with the C\+Make variable {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+I\+W\+Y\+U\+\_\+\+P\+A\+TH=$<$path$>$}. The default is {\ttfamily O\+FF}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+C\+H\+E\+C\+K\+\_\+\+C\+I\+R\+C\+U\+L\+A\+R\+\_\+\+D\+E\+PS=\{ON, O\+FF\}} enables compile-\/time checks for circular dependencies between different Ginkgo libraries and self-\/sufficient headers. Should only be used for development purposes. The default is {\ttfamily O\+FF}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+V\+E\+R\+B\+O\+S\+E\+\_\+\+L\+E\+V\+EL=integer} sets the verbosity of Ginkgo.
\begin{DoxyItemize}
\item {\ttfamily 0} disables all output in the main libraries,
\item {\ttfamily 1} enables a few important messages related to unexpected behavior (default).
\end{DoxyItemize}
\item {\ttfamily -\/D\+C\+M\+A\+K\+E\+\_\+\+I\+N\+S\+T\+A\+L\+L\+\_\+\+P\+R\+E\+F\+IX=path} sets the installation path for {\ttfamily make install}. The default value is usually something like {\ttfamily /usr/local}.
\item {\ttfamily -\/D\+C\+M\+A\+K\+E\+\_\+\+B\+U\+I\+L\+D\+\_\+\+T\+Y\+PE=type} specifies which configuration will be used for this build of Ginkgo. The default is {\ttfamily R\+E\+L\+E\+A\+SE}. Supported values are C\+Make\textquotesingle{}s standard build types such as {\ttfamily D\+E\+B\+UG} and {\ttfamily R\+E\+L\+E\+A\+SE} and the Ginkgo specific {\ttfamily C\+O\+V\+E\+R\+A\+GE}, {\ttfamily A\+S\+AN} (Address\+Sanitizer), {\ttfamily L\+S\+AN} (Leak\+Sanitizer), {\ttfamily T\+S\+AN} (Thread\+Sanitizer) and {\ttfamily U\+B\+S\+AN} (undefined behavior sanitizer) types.
\item {\ttfamily -\/D\+B\+U\+I\+L\+D\+\_\+\+S\+H\+A\+R\+E\+D\+\_\+\+L\+I\+BS=\{ON, O\+FF\}} builds ginkgo as shared libraries ({\ttfamily O\+FF}) or as dynamic libraries ({\ttfamily ON}), default is {\ttfamily ON}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+J\+A\+C\+O\+B\+I\+\_\+\+F\+U\+L\+L\+\_\+\+O\+P\+T\+I\+M\+I\+Z\+A\+T\+I\+O\+NS=\{ON, O\+FF\}} use all the optimizations for the C\+U\+DA Jacobi algorithm. {\ttfamily O\+FF} by default. Setting this option to {\ttfamily ON} may lead to very slow compile time ($>$20 minutes) for the {\ttfamily jacobi\+\_\+generate\+\_\+kernels.\+cu} file and high memory usage.
\item {\ttfamily -\/D\+C\+M\+A\+K\+E\+\_\+\+C\+U\+D\+A\+\_\+\+H\+O\+S\+T\+\_\+\+C\+O\+M\+P\+I\+L\+ER=path} instructs the build system to explicitly set C\+U\+DA\textquotesingle{}s host compiler to the path given as argument. By default, C\+U\+DA uses its toolchain\textquotesingle{}s host compiler. Setting this option may help if you\textquotesingle{}re experiencing linking errors due to A\+BI incompatibilities. This option is supported since \href{https://github.com/Kitware/CMake/commit/489c52ce680df6439f9c1e553cd2925ca8944cb1}{\texttt{ C\+Make 3.\+8}} but \href{https://cmake.org/cmake/help/v3.10/variable/CMAKE_CUDA_HOST_COMPILER.html}{\texttt{ documented starting from 3.\+10}}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+C\+U\+D\+A\+\_\+\+A\+R\+C\+H\+I\+T\+E\+C\+T\+U\+R\+ES=$<$list$>$} where {\ttfamily $<$list$>$} is a semicolon ({\ttfamily ;}) separated list of architectures. Supported values are\+:
\begin{DoxyItemize}
\item {\ttfamily Auto}
\item {\ttfamily Kepler}, {\ttfamily Maxwell}, {\ttfamily Pascal}, {\ttfamily Volta}, {\ttfamily Ampere}
\item {\ttfamily C\+O\+DE}, {\ttfamily C\+O\+D\+E(\+C\+O\+M\+P\+U\+T\+E)}, {\ttfamily (C\+O\+M\+P\+U\+TE)}
\end{DoxyItemize}

{\ttfamily Auto} will automatically detect the present C\+U\+D\+A-\/enabled G\+PU architectures in the system. {\ttfamily Kepler}, {\ttfamily Maxwell}, {\ttfamily Pascal}, {\ttfamily Volta} and {\ttfamily Ampere} will add flags for all architectures of that particular N\+V\+I\+D\+IA G\+PU generation. {\ttfamily C\+O\+M\+P\+U\+TE} and {\ttfamily C\+O\+DE} are placeholders that should be replaced with compute and code numbers (e.\+g. for {\ttfamily compute\+\_\+70} and {\ttfamily sm\+\_\+70} {\ttfamily C\+O\+M\+P\+U\+TE} and {\ttfamily C\+O\+DE} should be replaced with {\ttfamily 70}. Default is {\ttfamily Auto}. For a more detailed explanation of this option see the \href{https://github.com/ginkgo-project/CudaArchitectureSelector/blob/master/CudaArchitectureSelector.cmake\#L58}{\texttt{ {\ttfamily A\+R\+C\+H\+I\+T\+E\+C\+T\+U\+R\+ES} specification list}} section in the documentation of the Cuda\+Architecture\+Selector C\+Make module.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+W\+I\+N\+D\+O\+W\+S\+\_\+\+S\+H\+A\+R\+E\+D\+\_\+\+L\+I\+B\+R\+A\+R\+Y\+\_\+\+R\+E\+L\+P\+A\+TH=$<$path$>$} where $<$path$>$ is a relative path built with {\ttfamily P\+R\+O\+J\+E\+C\+T\+\_\+\+B\+I\+N\+A\+R\+Y\+\_\+\+D\+IR}. Users must add the absolute path ({\ttfamily P\+R\+O\+J\+E\+C\+T\+\_\+\+B\+I\+N\+A\+R\+Y\+\_\+\+D\+IR}/{\ttfamily G\+I\+N\+K\+G\+O\+\_\+\+W\+I\+N\+D\+O\+W\+S\+\_\+\+S\+H\+A\+R\+E\+D\+\_\+\+L\+I\+B\+R\+A\+R\+Y\+\_\+\+R\+E\+L\+P\+A\+TH}) into the environment variable P\+A\+TH when building shared libraries and executable program, default is {\ttfamily windows\+\_\+shared\+\_\+library}.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+C\+H\+E\+C\+K\+\_\+\+P\+A\+TH=\{ON, O\+FF\}} checks if the environment variable P\+A\+TH is valid. It is checked only when building shared libraries and executable program, default is {\ttfamily ON}.
\end{DoxyItemize}

For example, to build everything (in debug mode), use\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{cmake  -\/G "Unix Makefiles" -\/H. -\/BDebug -\/DCMAKE\_BUILD\_TYPE=Debug -\/DGINKGO\_DEVEL\_TOOLS=ON \(\backslash\)}
\DoxyCodeLine{    -\/DGINKGO\_BUILD\_TESTS=ON -\/DGINKGO\_BUILD\_REFERENCE=ON -\/DGINKGO\_BUILD\_OMP=ON \(\backslash\)}
\DoxyCodeLine{    -\/DGINKGO\_BUILD\_CUDA=ON -\/DGINKGO\_BUILD\_HIP=ON}
\DoxyCodeLine{cmake -\/-\/build Debug}
\end{DoxyCode}


N\+O\+TE\+: Ginkgo is known to work with the {\ttfamily Unix Makefiles}, {\ttfamily Ninja}, {\ttfamily Min\+GW Makefiles} and {\ttfamily Visual Studio 16 2019} based generators. Other C\+Make generators are untested.\hypertarget{install_ginkgo_autotoc_md1}{}\doxysubsection{Building Ginkgo in Windows}\label{install_ginkgo_autotoc_md1}
Depending on the configuration settings, some manual work might be required\+:
\begin{DoxyItemize}
\item Build Ginkgo as shared library\+: Add {\ttfamily P\+R\+O\+J\+E\+C\+T\+\_\+\+B\+I\+N\+A\+R\+Y\+\_\+\+D\+I\+R/\+G\+I\+N\+K\+G\+O\+\_\+\+W\+I\+N\+D\+O\+W\+S\+\_\+\+S\+H\+A\+R\+E\+D\+\_\+\+L\+I\+B\+R\+A\+R\+Y\+\_\+\+R\+E\+L\+P\+A\+TH} into the environment variable {\ttfamily P\+A\+TH}. {\ttfamily G\+I\+N\+K\+G\+O\+\_\+\+W\+I\+N\+D\+O\+W\+S\+\_\+\+S\+H\+A\+R\+E\+D\+\_\+\+L\+I\+B\+R\+A\+R\+Y\+\_\+\+R\+E\+L\+P\+A\+TH} is {\ttfamily windows\+\_\+shared\+\_\+library} by default. More Details are available in the Installation page.
\begin{DoxyItemize}
\item cmd\+: {\ttfamily set P\+A\+TH=\char`\"{}$<$\+P\+R\+O\+J\+E\+C\+T\+\_\+\+B\+I\+N\+A\+R\+Y\+\_\+\+D\+I\+R/\+G\+I\+N\+K\+G\+O\+\_\+\+W\+I\+N\+D\+O\+W\+S\+\_\+\+S\+H\+A\+R\+E\+D\+\_\+\+L\+I\+B\+R\+A\+R\+Y\+\_\+\+R\+E\+L\+P\+A\+T\+H$>$;\%\+P\+A\+T\+H\%\char`\"{}}
\item powershell\+: {\ttfamily @f\begin{DoxyParagraph}{env}
A\+TH="$<$P\+R\+O\+J\+E\+C\+T\+\_\+\+B\+I\+N\+A\+R\+Y\+\_\+\+D\+I\+R/\+G\+I\+N\+K\+G\+O\+\_\+\+W\+I\+N\+D\+O\+W\+S\+\_\+\+S\+H\+A\+R\+E\+D\+\_\+\+L\+I\+B\+R\+A\+R\+Y\+\_\+\+R\+E\+L\+P\+A\+TH$>$;@f
\end{DoxyParagraph}
env\+:P\+A\+TH"}
\end{DoxyItemize}

C\+Make will give the following error message if the path is not correct. 
\begin{DoxyCode}{0}
\DoxyCodeLine{Did not find this build in the environment variable PATH. Please add <path> into the environment variable PATH.}
\end{DoxyCode}
 where {\ttfamily $<$path$>$} is the needed {\ttfamily $<$P\+R\+O\+J\+E\+C\+T\+\_\+\+B\+I\+N\+A\+R\+Y\+\_\+\+D\+I\+R/\+G\+I\+N\+K\+G\+O\+\_\+\+W\+I\+N\+D\+O\+W\+S\+\_\+\+S\+H\+A\+R\+E\+D\+\_\+\+L\+I\+B\+R\+A\+R\+Y\+\_\+\+R\+E\+L\+P\+A\+TH$>$}.
\item Build Ginkgo with Debug mode\+: Some Debug build specific issues can appear depending on the machine and environment. The known issues are the following\+:
\begin{DoxyEnumerate}
\item {\ttfamily bigobj} issue\+: encountering {\ttfamily too many sections} needs the compilation flags {\ttfamily \textbackslash{}bigobj} or {\ttfamily -\/Wa,-\/mbig-\/obj}
\item {\ttfamily ld} issue\+: encountering {\ttfamily ld\+: error\+: export ordinal too large} needs the compilation flag {\ttfamily -\/O1}
\end{DoxyEnumerate}

The following are the details for different environments\+:
\begin{DoxyItemize}
\item {\itshape Microsoft Visual Studio}\+:
\begin{DoxyEnumerate}
\item {\ttfamily bigobj} issue
\begin{DoxyItemize}
\item {\ttfamily cmake -\/D\+C\+M\+A\+K\+E\+\_\+\+C\+X\+X\+\_\+\+F\+L\+A\+GS=\textbackslash{}bigobj $<$other parameters$>$ $<$source\+\_\+folder$>$} which might overwrite the default settings.
\item add {\ttfamily \textbackslash{}bigobj} into the environment variable {\ttfamily C\+X\+X\+F\+L\+A\+GS} (only available in the first cmake configuration)
\begin{DoxyItemize}
\item cmd\+: {\ttfamily set C\+X\+X\+F\+L\+A\+GS=\textbackslash{}bigobj}
\item powershell\+: {\ttfamily @f\$env\+:C\+X\+X\+F\+L\+A\+GS=\textbackslash{}bigobj}
\end{DoxyItemize}
\end{DoxyItemize}
\item {\ttfamily ld} issue ({\itshape Microsoft Visual Studio} does not have this issue)
\end{DoxyEnumerate}
\item {\itshape Cygwin}\+:
\begin{DoxyEnumerate}
\item {\ttfamily bigobj} issue
\begin{DoxyItemize}
\item add {\ttfamily -\/Wa,-\/mbig-\/obj -\/O1} into the environment variable {\ttfamily C\+X\+X\+F\+L\+A\+GS} (only available in the first cmake configuration)
\begin{DoxyItemize}
\item {\ttfamily export C\+X\+X\+F\+L\+A\+GS=\char`\"{}-\/\+Wa,-\/mbig-\/obj -\/\+O1\char`\"{}}
\end{DoxyItemize}
\item {\ttfamily cmake -\/D\+C\+M\+A\+K\+E\+\_\+\+C\+X\+X\+\_\+\+F\+L\+A\+GS=-\/Wa,-\/mbig-\/obj $<$other parameters$>$ $<$source\+\_\+folder$>$}, which might overwrite the default settings.
\end{DoxyItemize}
\item {\ttfamily ld} issue (If building Ginkgo as static library, this is not needed)
\begin{DoxyItemize}
\item {\ttfamily cmake -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+C\+O\+M\+P\+I\+L\+E\+R\+\_\+\+F\+L\+A\+GS=\char`\"{}-\/\+Wpedantic -\/\+O1\char`\"{} $<$other parameters$>$ $<$source\+\_\+folder$>$} ({\ttfamily G\+I\+N\+K\+G\+O\+\_\+\+C\+O\+M\+P\+I\+L\+E\+R\+\_\+\+F\+L\+A\+GS} is {\ttfamily -\/Wpedantic} by default)
\item add {\ttfamily -\/O1} in the environement variable {\ttfamily C\+X\+X\+\_\+\+F\+L\+A\+GS} or {\ttfamily C\+M\+A\+K\+E\+\_\+\+C\+X\+X\+\_\+\+F\+L\+A\+GS}
\end{DoxyItemize}
\end{DoxyEnumerate}
\item {\itshape Min\+GW}\+:
\begin{DoxyEnumerate}
\item {\ttfamily bigobj} issue
\begin{DoxyItemize}
\item add {\ttfamily -\/Wa,-\/mbig-\/obj -\/O1} into the environment variable {\ttfamily C\+X\+X\+F\+L\+A\+GS} (only available in the first cmake configuration)
\begin{DoxyItemize}
\item cmd\+: {\ttfamily set C\+X\+X\+F\+L\+A\+GS=\char`\"{}-\/\+Wa,-\/mbig-\/obj\char`\"{}}
\item powershell\+: {\ttfamily @f\$env\+:C\+X\+X\+F\+L\+A\+GS=\char`\"{}-\/\+Wa,-\/mbig-\/obj\char`\"{}}
\end{DoxyItemize}
\item {\ttfamily cmake -\/D\+C\+M\+A\+K\+E\+\_\+\+C\+X\+X\+\_\+\+F\+L\+A\+GS=-\/Wa,-\/mbig-\/obj $<$other parameters$>$ $<$source\+\_\+folder$>$}, which might overwrite the default settings.
\end{DoxyItemize}
\item {\ttfamily ld} issue (If building Ginkgo as static library, this is not needed)
\begin{DoxyItemize}
\item {\ttfamily cmake -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+C\+O\+M\+P\+I\+L\+E\+R\+\_\+\+F\+L\+A\+GS=\char`\"{}-\/\+Wpedantic -\/\+O1\char`\"{} $<$other parameters$>$ $<$source\+\_\+folder$>$} ({\ttfamily G\+I\+N\+K\+G\+O\+\_\+\+C\+O\+M\+P\+I\+L\+E\+R\+\_\+\+F\+L\+A\+GS} is {\ttfamily -\/Wpedantic} by default)
\item add {\ttfamily -\/O1} in the environement variable {\ttfamily C\+X\+X\+\_\+\+F\+L\+A\+GS} or {\ttfamily C\+M\+A\+K\+E\+\_\+\+C\+X\+X\+\_\+\+F\+L\+A\+GS}
\end{DoxyItemize}
\end{DoxyEnumerate}
\end{DoxyItemize}
\item Build Ginkgo in {\itshape Min\+GW}\+: If encountering the issue {\ttfamily cc1plus.\+exe\+: out of memory allocating 65536 bytes}, please follow the workaround in \href{https://www.intel.com/content/www/us/en/programmable/support/support-resources/knowledge-base/embedded/2016/cc1plus-exe--out-of-memory-allocating-65536-bytes.html}{\texttt{ reference}}, or trying to compile ginkgo again might work.
\end{DoxyItemize}\hypertarget{install_ginkgo_autotoc_md2}{}\doxysubsection{Building Ginkgo with H\+I\+P support}\label{install_ginkgo_autotoc_md2}
Ginkgo provides a \href{https://github.com/ROCm-Developer-Tools/HIP}{\texttt{ H\+IP}} backend. This allows to compile optimized versions of the kernels for either A\+MD or N\+V\+I\+D\+IA G\+P\+Us. The C\+Make configuration step will try to auto-\/detect the presence of H\+IP either at {\ttfamily /opt/rocm/hip} or at the path specified by {\ttfamily H\+I\+P\+\_\+\+P\+A\+TH} as a C\+Make parameter ({\ttfamily -\/D\+H\+I\+P\+\_\+\+P\+A\+TH=}) or environment variable ({\ttfamily export H\+I\+P\+\_\+\+P\+A\+TH=}), unless {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+B\+U\+I\+L\+D\+\_\+\+H\+IP=O\+N/\+O\+FF} is set explicitly.\hypertarget{install_ginkgo_autotoc_md3}{}\doxysubsubsection{Correctly installing H\+I\+P toolkits and dependencies for Ginkgo}\label{install_ginkgo_autotoc_md3}
In general, Ginkgo\textquotesingle{}s H\+IP backend requires the following packages\+:
\begin{DoxyItemize}
\item H\+IP,
\item hip\+B\+L\+AS,
\item hip\+S\+P\+A\+R\+SE,
\item Thrust.
\end{DoxyItemize}

It is necessary to provide some details about the different ways to procure and install these packages, in particular for N\+V\+I\+D\+IA systems since getting a correct, non bloated setup is not straightforward.

For A\+MD systems, the simplest way is to follow the \href{https://github.com/ROCm-Developer-Tools/HIP/blob/master/INSTALL.md}{\texttt{ instructions provided here}} which provide package installers for most Linux distributions. Ginkgo also needs the installation of the \href{https://github.com/ROCmSoftwarePlatform/hipBLAS}{\texttt{ hip\+B\+L\+AS}} and \href{https://github.com/ROCmSoftwarePlatform/hipSPARSE}{\texttt{ hip\+S\+P\+A\+R\+SE}} interfaces. Optionally if you do not already have a thrust installation, \mbox{[}the R\+O\+Cm provided roc\+Thrust package can be used\mbox{]}(\href{https://github.com/ROCmSoftwarePlatform/rocThrust}{\texttt{ https\+://github.\+com/\+R\+O\+Cm\+Software\+Platform/roc\+Thrust}}).

For N\+V\+I\+D\+IA systems, the traditional installation (package {\ttfamily hip\+\_\+nvcc}), albeit working properly is currently odd\+: it depends on all the {\ttfamily hcc} related packages, although the {\ttfamily nvcc} backend seems to entirely rely on the C\+U\+DA suite. \mbox{[}See this issue for more details\mbox{]}(\href{https://github.com/ROCmSoftwarePlatform/hipBLAS/issues/53}{\texttt{ https\+://github.\+com/\+R\+O\+Cm\+Software\+Platform/hip\+B\+L\+A\+S/issues/53}}). It is advised in this case to compile everything manually, including using forks of {\ttfamily hip\+B\+L\+AS} and {\ttfamily hip\+S\+P\+A\+R\+SE} specifically made to not depend on the {\ttfamily hcc} specific packages. {\ttfamily Thrust} is often provided by C\+U\+DA and this Thrust version should work with {\ttfamily H\+IP}. Here is a sample procedure for installing {\ttfamily H\+IP}, {\ttfamily hip\+B\+L\+AS} and {\ttfamily hip\+S\+P\+A\+R\+SE}.


\begin{DoxyCode}{0}
\DoxyCodeLine{\# HIP}
\DoxyCodeLine{git clone https://github.com/ROCm-\/Developer-\/Tools/HIP.git}
\DoxyCodeLine{pushd HIP \&\& mkdir build \&\& pushd build}
\DoxyCodeLine{cmake .. \&\& make install}
\DoxyCodeLine{popd \&\& popd}
\DoxyCodeLine{}
\DoxyCodeLine{\# hipBLAS}
\DoxyCodeLine{git clone https://github.com/tcojean/hipBLAS.git}
\DoxyCodeLine{pushd hipBLAS \&\& mkdir build \&\& pushd build}
\DoxyCodeLine{cmake .. \&\& make install}
\DoxyCodeLine{popd \&\& popd}
\DoxyCodeLine{}
\DoxyCodeLine{\# hipSPARSE}
\DoxyCodeLine{git clone https://github.com/tcojean/hipSPARSE.git}
\DoxyCodeLine{pushd hipSPARSE \&\& mkdir build \&\& pushd build}
\DoxyCodeLine{cmake -\/DBUILD\_CUDA=ON .. \&\& make install}
\DoxyCodeLine{popd \&\& popd}
\end{DoxyCode}
\hypertarget{install_ginkgo_autotoc_md4}{}\doxysubsubsection{Changing the paths to search for H\+I\+P and other packages}\label{install_ginkgo_autotoc_md4}
All H\+IP installation paths can be configured through the use of environment variables or C\+Make variables. This way of configuring the paths is currently imposed by the {\ttfamily H\+IP} tool suite. The variables are the following\+:
\begin{DoxyItemize}
\item C\+Make {\ttfamily -\/D\+H\+I\+P\+\_\+\+P\+A\+TH=} or environment {\ttfamily export H\+I\+P\+\_\+\+P\+A\+TH=}\+: sets the {\ttfamily H\+IP} installation path. The default value is {\ttfamily /opt/rocm/hip}.
\item C\+Make {\ttfamily -\/D\+H\+I\+P\+B\+L\+A\+S\+\_\+\+P\+A\+TH=} or environment {\ttfamily export H\+I\+P\+B\+L\+A\+S\+\_\+\+P\+A\+TH=}\+: sets the {\ttfamily hip\+B\+L\+AS} installation path. The default value is {\ttfamily /opt/rocm/hipblas}.
\item C\+Make {\ttfamily -\/D\+H\+I\+P\+S\+P\+A\+R\+S\+E\+\_\+\+P\+A\+TH=} or environment {\ttfamily export H\+I\+P\+S\+P\+A\+R\+S\+E\+\_\+\+P\+A\+TH=}\+: sets the {\ttfamily hip\+S\+P\+A\+R\+SE} installation path. The default value is {\ttfamily /opt/rocm/hipsparse}.
\item C\+Make {\ttfamily -\/D\+H\+C\+C\+\_\+\+P\+A\+TH=} or environment {\ttfamily export H\+C\+C\+\_\+\+P\+A\+TH=}\+: sets the {\ttfamily H\+CC} installation path, for A\+MD backends. The default value is {\ttfamily /opt/rocm/hcc}.
\item environment {\ttfamily export C\+U\+D\+A\+\_\+\+P\+A\+TH=}\+: where {\ttfamily hipcc} can find {\ttfamily C\+U\+DA} if it is not in the default {\ttfamily /usr/local/cuda} path.
\end{DoxyItemize}\hypertarget{install_ginkgo_autotoc_md5}{}\doxysubsubsection{H\+I\+P platform detection of A\+M\+D and N\+V\+I\+D\+IA}\label{install_ginkgo_autotoc_md5}
By default, Ginkgo uses the output of {\ttfamily /opt/rocm/hip/bin/hipconfig -\/-\/platform} to select the backend. The accepted values are either {\ttfamily hcc} (A\+MD) or {\ttfamily nvcc} (N\+V\+I\+D\+IA). When on an A\+MD or N\+V\+I\+D\+IA system, this should output the correct platform by default. When on a system without G\+P\+Us, this should output {\ttfamily hcc} by default. To change this value, export the environment variable {\ttfamily H\+I\+P\+\_\+\+P\+L\+A\+T\+F\+O\+RM} like so\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{export HIP\_PLATFORM=nvcc}
\end{DoxyCode}
\hypertarget{install_ginkgo_autotoc_md6}{}\doxysubsubsection{Setting platform specific compilation flags}\label{install_ginkgo_autotoc_md6}
Platform specific compilation flags can be given through the following C\+Make variables\+:
\begin{DoxyItemize}
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+H\+I\+P\+\_\+\+C\+O\+M\+P\+I\+L\+E\+R\+\_\+\+F\+L\+A\+GS=}\+: compilation flags given to all platforms.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+H\+I\+P\+\_\+\+H\+C\+C\+\_\+\+C\+O\+M\+P\+I\+L\+E\+R\+\_\+\+F\+L\+A\+GS=}\+: compilation flags given to A\+MD platforms.
\item {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+H\+I\+P\+\_\+\+N\+V\+C\+C\+\_\+\+C\+O\+M\+P\+I\+L\+E\+R\+\_\+\+F\+L\+A\+GS=}\+: compilation flags given to N\+V\+I\+D\+IA platforms.
\end{DoxyItemize}\hypertarget{install_ginkgo_autotoc_md7}{}\doxysubsection{Third party libraries and packages}\label{install_ginkgo_autotoc_md7}
Ginkgo relies on third party packages in different cases. These third party packages can be turned off by disabling the relevant options.


\begin{DoxyItemize}
\item G\+I\+N\+K\+G\+O\+\_\+\+B\+U\+I\+L\+D\+\_\+\+C\+U\+DA=ON\+: \href{https://github.com/ginkgo-project/CudaArchitectureSelector}{\texttt{ Cuda\+Architecture\+Selector}} (C\+AS) is a C\+Make helper to manage C\+U\+DA architecture settings;
\item G\+I\+N\+K\+G\+O\+\_\+\+B\+U\+I\+L\+D\+\_\+\+T\+E\+S\+TS=ON\+: Our tests are implemented with \href{https://github.com/google/googletest}{\texttt{ Google Test}};
\item G\+I\+N\+K\+G\+O\+\_\+\+B\+U\+I\+L\+D\+\_\+\+B\+E\+N\+C\+H\+M\+A\+R\+KS=ON\+: For argument management we use \href{https://github.com/gflags/gflags}{\texttt{ gflags}} and for J\+S\+ON parsing we use \href{https://github.com/Tencent/rapidjson}{\texttt{ Rapid\+J\+S\+ON}};
\item G\+I\+N\+K\+G\+O\+\_\+\+D\+E\+V\+E\+L\+\_\+\+T\+O\+O\+LS=ON\+: \href{https://github.com/gflegar/git-cmake-format}{\texttt{ git-\/cmake-\/format}} is our C\+Make helper for code formatting.
\end{DoxyItemize}

By default, Ginkgo uses the internal version of each package. For each of the packages {\ttfamily G\+T\+E\+ST}, {\ttfamily G\+F\+L\+A\+GS}, {\ttfamily R\+A\+P\+I\+D\+J\+S\+ON} and {\ttfamily C\+AS}, it is possible to force Ginkgo to try to use an external version of a package. For this, Ginkgo provides two ways to find packages. To rely on the C\+Make {\ttfamily find\+\_\+package} command, use the C\+Make option {\ttfamily -\/D\+G\+I\+N\+K\+G\+O\+\_\+\+U\+S\+E\+\_\+\+E\+X\+T\+E\+R\+N\+A\+L\+\_\+$<$package$>$=ON}. Note that, if the external packages were not installed to the default location, the C\+Make option {\ttfamily -\/D\+C\+M\+A\+K\+E\+\_\+\+P\+R\+E\+F\+I\+X\+\_\+\+P\+A\+TH=$<$path-\/list$>$} needs to be set to the semicolon ({\ttfamily ;}) separated list of install paths of these external packages. For more Information, see the \href{https://cmake.org/cmake/help/v3.9/variable/CMAKE_PREFIX_PATH.html}{\texttt{ C\+Make documentation for C\+M\+A\+K\+E\+\_\+\+P\+R\+E\+F\+I\+X\+\_\+\+P\+A\+TH}} for details.

To manually configure the paths, Ginkgo relies on the \href{https://xsdk.info/policies/}{\texttt{ standard x\+S\+DK Installation policies}} for all packages except {\ttfamily C\+AS} (as it is neither a library nor a header, it cannot be expressed through the {\ttfamily T\+PL} format)\+:
\begin{DoxyItemize}
\item {\ttfamily -\/D\+T\+P\+L\+\_\+\+E\+N\+A\+B\+L\+E\+\_\+$<$package$>$=ON}
\item {\ttfamily -\/D\+T\+P\+L\+\_\+$<$package$>$\+\_\+\+L\+I\+B\+R\+A\+R\+I\+ES=/path/to/libraries.\{so$\vert$a\}}
\item {\ttfamily -\/D\+T\+P\+L\+\_\+$<$package$>$\+\_\+\+I\+N\+C\+L\+U\+D\+E\+\_\+\+D\+I\+RS=/path/to/header/directory}
\end{DoxyItemize}

When applicable (e.\+g. for {\ttfamily G\+Test} libraries), a {\ttfamily ;} separated list can be given to the {\ttfamily T\+P\+L\+\_\+$<$package$>$\+\_\+\{L\+I\+B\+R\+A\+R\+I\+E\+S$\vert$\+I\+N\+C\+L\+U\+D\+E\+\_\+\+D\+I\+RS\}} variables.\hypertarget{install_ginkgo_autotoc_md8}{}\doxysubsection{Installing Ginkgo}\label{install_ginkgo_autotoc_md8}
To install Ginkgo into the specified folder, execute the following command in the build folder


\begin{DoxyCode}{0}
\DoxyCodeLine{make install}
\end{DoxyCode}


If the installation prefix (see {\ttfamily C\+M\+A\+K\+E\+\_\+\+I\+N\+S\+T\+A\+L\+L\+\_\+\+P\+R\+E\+F\+IX}) is not writable for your user, e.\+g. when installing Ginkgo system-\/wide, it might be necessary to prefix the call with {\ttfamily sudo}.

After the installation, C\+Make can find ginkgo with {\ttfamily find\+\_\+package(\+Ginkgo)}. An example can be found in the \href{test_install/CMakeLists.txt}{\texttt{ {\ttfamily test\+\_\+install}}}. 