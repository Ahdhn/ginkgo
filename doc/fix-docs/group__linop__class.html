<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ginkgo: Linop_class</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_doc.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ginkgo
   &#160;<span id="projectnumber">Generated from remotes/origin/fix-docs branch based on develop. Ginkgo version 0.0.0</span>
   </div>
   <div id="projectbrief">A numerical linear algebra library targeting many-core architectures</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Linop_class<div class="ingroups"><a class="el" href="group__LinOp.html">Linear Operators</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The linear operator (<a class="el" href="classgko_1_1LinOp.html">LinOp</a>) is a base class for all linear algebra objects in Ginkgo.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Linop_class:</div>
<div class="dyncontent">
<center><table><tr><td><div class="center"><iframe scrolling="no" frameborder="0" src="group__linop__class.svg" width="287" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</td></tr></table></center>
</div>
<p>The linear operator (<a class="el" href="classgko_1_1LinOp.html">LinOp</a>) is a base class for all linear algebra objects in Ginkgo. </p>
<p>The main benefit of having a single base class for the entire collection of linear algebra objects (as opposed to having separate hierarchies for matrices, solvers and preconditioners) is the generality it provides.</p>
<p>First, since all subclasses provide a common interface, the library users are exposed to a smaller set of routines. For example, a matrix-vector product, a preconditioner application, or even a system solve are just different terms given to the operation of applying a certain linear operator to a vector. As such, Ginkgo uses the same routine name, <a class="el" href="classgko_1_1LinOp.html#a0449b2fc705d2f970855af23b5e2788e" title="Applies a linear operator to a vector (or a sequence of vectors). ">LinOp::apply()</a> for each of these operations, where the actual operation performed depends on the type of linear operator involved in the operation.</p>
<p>Second, a common interface often allows for writing more generic code. If a user's routine requires only operations provided by the <a class="el" href="classgko_1_1LinOp.html">LinOp</a> interface, the same code can be used for any kind of linear operators, independent of whether these are matrices, solvers or preconditioners. This feature is also extensively used in Ginkgo itself. For example, a preconditioner used inside a Krylov solver is a <a class="el" href="classgko_1_1LinOp.html">LinOp</a>. This allows the user to supply a wide variety of preconditioners: either the ones which were designed to be used in this scenario (like ILU or block-Jacobi), a user-supplied matrix which is known to be a good preconditioner for the specific problem, or even another solver (e.g., if constructing a flexible GMRES solver).</p>
<p>A key observation for providing a unified interface for matrices, solvers, and preconditioners is that the most common operation performed on all of them can be expressed as an application of a linear operator to a vector:</p>
<ul>
<li>the sparse matrix-vector product with a matrix <img class="formulaInl" alt="$A$" src="form_0.png"/> is a linear operator application <img class="formulaInl" alt="$y = Ax$" src="form_1.png"/>;</li>
<li>the application of a preconditioner is a linear operator application <img class="formulaInl" alt="$y = M^{-1}x$" src="form_2.png"/>, where <img class="formulaInl" alt="$M$" src="form_3.png"/> is an approximation of the original system matrix <img class="formulaInl" alt="$A$" src="form_0.png"/> (thus a preconditioner represents an "approximate
    inverse" operator <img class="formulaInl" alt="$M^{-1}$" src="form_4.png"/>).</li>
<li>the system solve <img class="formulaInl" alt="$Ax = b$" src="form_5.png"/> can be viewed as linear operator application <img class="formulaInl" alt="$x = A^{-1}b$" src="form_6.png"/> (it goes without saying that the implementation of linear system solves does not follow this conceptual idea), so a linear system solver can be viewed as a representation of the operator <img class="formulaInl" alt="$A^{-1}$" src="form_7.png"/>.</li>
</ul>
<p>Finally, direct manipulation of <a class="el" href="classgko_1_1LinOp.html">LinOp</a> objects is rarely required in simple scenarios. As an illustrative example, one could construct a fixed-point iteration routine <img class="formulaInl" alt="$x_{k+1} = Lx_k + b$" src="form_8.png"/> as follows:</p>
<div class="fragment"><div class="line">std::unique_ptr&lt;matrix::Dense&lt;&gt;&gt; calculate_fixed_point(</div><div class="line">        <span class="keywordtype">int</span> iters, <span class="keyword">const</span> LinOp *L, <span class="keyword">const</span> matrix::Dense&lt;&gt; *x0</div><div class="line">        <span class="keyword">const</span> matrix::Dense&lt;&gt; *b)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> x = <a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">gko::clone</a>(x0);</div><div class="line">    <span class="keyword">auto</span> tmp = <a class="code" href="namespacegko.html#a1beb80750459e4201aa9d882d2d074c3">gko::clone</a>(x0);</div><div class="line">    <span class="keyword">auto</span> <a class="code" href="namespacegko.html#a0059e27f8f4bc348ff65c1e60caf47c8">one</a> = Dense&lt;&gt;::create(L-&gt;get_executor(), {1.0,});</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; iters; ++i) {</div><div class="line">        L-&gt;apply(<a class="code" href="namespacegko.html#aa8cb4876b72e5e1036ea9575443c439b">gko::lend</a>(tmp), <a class="code" href="namespacegko.html#aa8cb4876b72e5e1036ea9575443c439b">gko::lend</a>(x));</div><div class="line">        x-&gt;add_scaled(<a class="code" href="namespacegko.html#aa8cb4876b72e5e1036ea9575443c439b">gko::lend</a>(<a class="code" href="namespacegko.html#a0059e27f8f4bc348ff65c1e60caf47c8">one</a>), <a class="code" href="namespacegko.html#aa8cb4876b72e5e1036ea9575443c439b">gko::lend</a>(b));</div><div class="line">        tmp-&gt;copy_from(<a class="code" href="namespacegko.html#aa8cb4876b72e5e1036ea9575443c439b">gko::lend</a>(x));</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> x;</div><div class="line">}</div></div><!-- fragment --><p>Here, if <img class="formulaInl" alt="$L$" src="form_9.png"/> is a matrix, <a class="el" href="classgko_1_1LinOp.html#a0449b2fc705d2f970855af23b5e2788e" title="Applies a linear operator to a vector (or a sequence of vectors). ">LinOp::apply()</a> refers to the matrix vector product, and <code>L-&gt;apply(a, b)</code> computes <img class="formulaInl" alt="$b = L \cdot a$" src="form_10.png"/>. <code>x-&gt;add_scaled(one.get(), b.get())</code> is the <code>axpy</code> vector update <img class="formulaInl" alt="$x:=x+b$" src="form_11.png"/>.</p>
<p>The interesting part of this example is the apply() routine at line 4 of the function body. Since this routine is part of the <a class="el" href="classgko_1_1LinOp.html">LinOp</a> base class, the fixed-point iteration routine can calculate a fixed point not only for matrices, but for any type of linear operator. </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
