The minimal C\+U\+DA solver example.

This example depends on simple-\/solver.

 \label{_Intro}%
 \label{_Introduction}%
\section*{Introduction}

This is a minimal example that solves a system with Ginkgo. The matrix, right hand side and initial guess are read from standard input, and the result is written to standard output. The system matrix is stored in C\+SR format, and the system solved using the CG method, preconditioned with the block-\/\+Jacobi preconditioner. All computations are done on the G\+PU.

The easiest way to use the example data from the data/ folder is to concatenate the matrix, the right hand side and the initial solution (in that exact order), and pipe the result to the minimal\+\_\+solver\+\_\+cuda executable\+:


\begin{DoxyCode}
cat data/A.mtx data/b.mtx data/x0.mtx | ./minimal\_solver\_cuda
\end{DoxyCode}


\label{_Abouttheexample}%
\subsubsection*{About the example }

\label{_CommProg}%
 \section*{The commented program}


\begin{DoxyCode}
\textcolor{preprocessor}{#include <ginkgo/ginkgo.hpp>}
\textcolor{preprocessor}{#include <iostream>}

\textcolor{keywordtype}{int} main()
\{
\end{DoxyCode}


Instantiate a C\+U\+DA executor


\begin{DoxyCode}
\textcolor{keyword}{auto} gpu = \hyperlink{classgko_1_1CudaExecutor_a2718a92034350650ef406ffdb60db090}{gko::CudaExecutor::create}(0, 
      \hyperlink{classgko_1_1OmpExecutor_a33ca05fdd0fc928ee262fc9425304874}{gko::OmpExecutor::create}());
\end{DoxyCode}


Read data


\begin{DoxyCode}
\textcolor{keyword}{auto} A = gko::read<gko::matrix::Csr<>>(std::cin, gpu);
\textcolor{keyword}{auto} b = gko::read<gko::matrix::Dense<>>(std::cin, gpu);
\textcolor{keyword}{auto} x = gko::read<gko::matrix::Dense<>>(std::cin, gpu);
\end{DoxyCode}


Create the solver


\begin{DoxyCode}
\textcolor{keyword}{auto} solver =
    \hyperlink{classgko_1_1solver_1_1Cg}{gko::solver::Cg<>::build}()
        .with\_preconditioner(\hyperlink{classgko_1_1preconditioner_1_1Jacobi}{gko::preconditioner::Jacobi<>::build}().on(
      gpu))
        .with\_criteria(
            gko::stop::Iteration::build().with\_max\_iters(20u).on(gpu),
            \hyperlink{classgko_1_1stop_1_1ResidualNormReduction}{gko::stop::ResidualNormReduction<>::build}()
                .with\_reduction\_factor(1e-15)
                .on(gpu))
        .on(gpu);
\end{DoxyCode}


Solve system


\begin{DoxyCode}
solver->generate(\hyperlink{namespacegko_acbd3fd6d07e498892881e8e2ab0b4167}{give}(A))->apply(\hyperlink{namespacegko_aa8cb4876b72e5e1036ea9575443c439b}{lend}(b), \hyperlink{namespacegko_aa8cb4876b72e5e1036ea9575443c439b}{lend}(x));
\end{DoxyCode}


Write result


\begin{DoxyCode}
    \hyperlink{namespacegko_a859dc47a462721d83728d91ab7fa2148}{write}(std::cout, \hyperlink{namespacegko_aa8cb4876b72e5e1036ea9575443c439b}{lend}(x));
\}
\end{DoxyCode}
 \label{_Results}%
\section*{Results}

\label{_Commentsaboutprogramminganddebugging}%
\paragraph*{Comments about programming and debugging }

\label{_PlainProg}%
 \section*{The plain program}


\begin{DoxyCodeInclude}
\end{DoxyCodeInclude}
 